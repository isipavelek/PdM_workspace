/*
 * API_debounce.c
 *
 *  Created on: 5 mar. 2023
 *      Author: ipave
 */

#include "API_debounce.h"

extern uchar estado;

void debounceFSM_init(){
	estado=BUTTON_UP;

}
void debounceFSM_update(){

	switch (estado){
	case (BUTTON_UP): if(!BSP_PB_GetState(BUTTON_USER))estado=BUTTON_FALLING;

					  break;
	case (BUTTON_FALLING):if(!BSP_PB_GetState(BUTTON_USER))estado=BUTTON_DOWN;
						 else {
							 buttonReleased();
							 estado=BUTTON_UP;
						 }
						break;
	case (BUTTON_DOWN):if(BSP_PB_GetState(BUTTON_USER))estado=BUTTON_RAISING;
						break;
	case (BUTTON_RAISING):if(!BSP_PB_GetState(BUTTON_USER))estado=BUTTON_DOWN;
						 else {
							 buttonPressed();
							 estado=BUTTON_UP;
						 }
						break;


	}


}

void buttonPressed(){
	  BSP_LED_On(LED1);


}
void buttonReleased(){

	  BSP_LED_Off(LED1);

}
